<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Run a basic gRPC example with Docker | YSMILES HOME</title><meta name=keywords content="gRPC,Docker,Linux,Network"><meta name=description content="Introduction The purpose of this article is very simple. Just run a gRPC example in different Docker containers. Since it really costed me a lot of time, I&rsquo;d like to keep records here.
Docker is a very useful container tool, which can be considered as a light virtualization technique comparing to traditional virtual machine tools such as Virtualbox, VMware, etc. For more details about the differences between them, as well as the Docker&rsquo;s basics, please refer this Stack Overflow question, the Digital Ocean tutorial, or the Docker official introduction."><meta name=author content="Frederick"><link rel=canonical href=gh.ysmiles.com/posts/run-a-basic-grpc-example-with-docker/><link crossorigin=anonymous href=/gh.ysmiles.com/assets/css/stylesheet.ddbf7219471e1126282438a902837d962a32b41ca0eb0fdcbea41bcd83b8d308.css integrity="sha256-3b9yGUceESYoJDipAoN9lioytByg6w/cvqQbzYO40wg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/gh.ysmiles.com/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=/images/favicon.ico><link rel=icon type=image/png sizes=16x16 href=gh.ysmiles.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=gh.ysmiles.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=/images/yun-da.png><link rel=mask-icon href=/images/yun-da.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Run a basic gRPC example with Docker"><meta property="og:description" content="Introduction The purpose of this article is very simple. Just run a gRPC example in different Docker containers. Since it really costed me a lot of time, I&rsquo;d like to keep records here.
Docker is a very useful container tool, which can be considered as a light virtualization technique comparing to traditional virtual machine tools such as Virtualbox, VMware, etc. For more details about the differences between them, as well as the Docker&rsquo;s basics, please refer this Stack Overflow question, the Digital Ocean tutorial, or the Docker official introduction."><meta property="og:type" content="article"><meta property="og:url" content="gh.ysmiles.com/posts/run-a-basic-grpc-example-with-docker/"><meta property="og:image" content="gh.ysmiles.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-10-05T00:00:00+00:00"><meta property="article:modified_time" content="2017-10-05T00:00:00+00:00"><meta property="og:site_name" content="ysmiles homepage"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="gh.ysmiles.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Run a basic gRPC example with Docker"><meta name=twitter:description content="Introduction The purpose of this article is very simple. Just run a gRPC example in different Docker containers. Since it really costed me a lot of time, I&rsquo;d like to keep records here.
Docker is a very useful container tool, which can be considered as a light virtualization technique comparing to traditional virtual machine tools such as Virtualbox, VMware, etc. For more details about the differences between them, as well as the Docker&rsquo;s basics, please refer this Stack Overflow question, the Digital Ocean tutorial, or the Docker official introduction."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"gh.ysmiles.com/posts/"},{"@type":"ListItem","position":3,"name":"Run a basic gRPC example with Docker","item":"gh.ysmiles.com/posts/run-a-basic-grpc-example-with-docker/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Run a basic gRPC example with Docker","name":"Run a basic gRPC example with Docker","description":"Introduction The purpose of this article is very simple. Just run a gRPC example in different Docker containers. Since it really costed me a lot of time, I\u0026rsquo;d like to keep records here.\nDocker is a very useful container tool, which can be considered as a light virtualization technique comparing to traditional virtual machine tools such as Virtualbox, VMware, etc. For more details about the differences between them, as well as the Docker\u0026rsquo;s basics, please refer this Stack Overflow question, the Digital Ocean tutorial, or the Docker official introduction.","keywords":["gRPC","Docker","Linux","Network"],"articleBody":"Introduction The purpose of this article is very simple. Just run a gRPC example in different Docker containers. Since it really costed me a lot of time, I’d like to keep records here.\nDocker is a very useful container tool, which can be considered as a light virtualization technique comparing to traditional virtual machine tools such as Virtualbox, VMware, etc. For more details about the differences between them, as well as the Docker’s basics, please refer this Stack Overflow question, the Digital Ocean tutorial, or the Docker official introduction.\nInstall Docker The official tutorial is good enough for Ubuntu. This alternative installation tutorial from Digital Ocean tutorials also introduces some basic commands and tips, such as executing the docker command without sudo. I tested them at an Ubuntu 16.04 x64 server, and everything went well.\nInstall commands for lazy guys who also use Ubuntu x64 release:\nsudo apt-get update sudo apt-get install \\ apt-transport-https \\ ca-certificates \\ curl \\ software-properties-common curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - sudo add-apt-repository \\ \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\ $(lsb_release -cs) \\ stable\" sudo apt-get update sudo apt-get install docker-ce Install gRPC at local host OS Actually this step is not needed if you want to do all the work inside containers. But with local installed package, we can test host-to-container communications through gRPC API.\nHere, I explicitly use python3.\npython3 -m pip install grpcio or just\npip3 install grpcio Get grpc/python Docker image Here since I did not build my own Docker image but directly use the official one.\nTo get latest Python 3 environment with gRPC, run\ndocker pull grpc/python:1.4 Note here “1.4” tag is necessary, otherwise it will pull “latest” one, which is Python 2.7 environment.\nGet gRPC examples Follow the gRPC official guide, we can get the example source code.\n# Clone the repository to get the example code: git clone -b v1.6.x https://github.com/grpc/grpc # Navigate to the \"hello, world\" Python example: cd grpc/examples/python/helloworld Run in containers Run the RPC server in docker container\ndocker run -itd --rm --name my-running-server \\ -v \"$PWD\":/usr/src/myapp -w /usr/src/myapp \\ grpc/python:1.4 python3 greeter_server.py Here “d” in -itd means “detach”. So we can let the container there and run other commands. We can use docker attach my-running-server to see what is going on for server container, and CTRL-p CTRL-q to detach again.\nThen, we can check docker default network using\ndocker network inspect bridge From the output, the server container should have the IP “174.17.0.2” at network “bridge”.\nSmall modify from “localhost” to “174.17.0.2” is required.\ndef run(): # channel = grpc.insecure_channel('localhost:50051') channel = grpc.insecure_channel('174.17.0.2:50051') ... In same terminal (because I was using ssh connection to a server), run the client\ndocker run -it --rm --name my-running-client \\ -v \"$PWD\":/usr/src/myapp -w /usr/src/myapp \\ grpc/python:1.4 python3 greeter_client.py We can get correct output.\nAlso we can run client locally.\npython3 greeter_client.py The output should be same.\n","wordCount":"479","inLanguage":"en","datePublished":"2017-10-05T00:00:00Z","dateModified":"2017-10-05T00:00:00Z","author":{"@type":"Person","name":"Frederick"},"mainEntityOfPage":{"@type":"WebPage","@id":"gh.ysmiles.com/posts/run-a-basic-grpc-example-with-docker/"},"publisher":{"@type":"Organization","name":"YSMILES HOME","logo":{"@type":"ImageObject","url":"/images/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=gh.ysmiles.com accesskey=h title="ysmiles (Alt + H)"><img src=/images/yun-da.png alt aria-label=logo height=35>ysmiles</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=gh.ysmiles.com/gh.ysmiles.com/about title="About me"><span>About me</span></a></li><li><a href=gh.ysmiles.com/gh.ysmiles.com/tags title=Tags><span>Tags</span></a></li><li><a href=gh.ysmiles.com/gh.ysmiles.com/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=gh.ysmiles.com>Home</a>&nbsp;»&nbsp;<a href=gh.ysmiles.com/posts/>Posts</a></div><h1 class=post-title>Run a basic gRPC example with Docker</h1><div class=post-meta><span title='2017-10-05 00:00:00 +0000 UTC'>October 5, 2017</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Frederick</div></header><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>The purpose of this article is very simple. Just run a gRPC example in different Docker containers.
Since it really costed me a lot of time, I&rsquo;d like to keep records here.</p><p>Docker is a very useful container tool, which can be considered as a light virtualization technique comparing to traditional virtual machine tools such as Virtualbox, VMware, etc.
For more details about the differences between them, as well as the Docker&rsquo;s basics, please refer this <a href=https://stackoverflow.com/questions/16047306/how-is-docker-different-from-a-normal-virtual-machine>Stack Overflow question</a>, the <a href=https://www.digitalocean.com/community/tutorials/the-docker-ecosystem-an-introduction-to-common-components>Digital Ocean tutorial</a>, or the <a href=https://www.docker.com/what-docker>Docker official introduction</a>.</p><h2 id=install-docker>Install Docker<a hidden class=anchor aria-hidden=true href=#install-docker>#</a></h2><p>The <a href=https://docs.docker.com/engine/installation/linux/docker-ce/ubuntu/#install-using-the-repository>official tutorial</a> is good enough for Ubuntu.
This alternative installation tutorial from <a href=https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-16-04>Digital Ocean tutorials</a> also introduces some basic commands and tips, such as executing the docker command without sudo.
I tested them at an Ubuntu 16.04 x64 server, and everything went well.</p><p>Install commands for lazy guys who also use Ubuntu x64 release:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get update
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>sudo apt-get install <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>      apt-transport-https <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>      ca-certificates <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>      curl <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>      software-properties-common
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>sudo add-apt-repository <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>     <span style=color:#e6db74>&#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     </span><span style=color:#66d9ef>$(</span>lsb_release -cs<span style=color:#66d9ef>)</span><span style=color:#e6db74> \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     stable&#34;</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>sudo apt-get update
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>sudo apt-get install docker-ce
</span></span></code></pre></div><h2 id=install-grpc-at-local-host-os>Install gRPC at local host OS<a hidden class=anchor aria-hidden=true href=#install-grpc-at-local-host-os>#</a></h2><p>Actually this step is not needed if you want to do all the work inside containers.
But with local installed package, we can test host-to-container communications through gRPC API.</p><p>Here, I explicitly use python3.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python3 -m pip install grpcio
</span></span></code></pre></div><p>or just</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip3 install grpcio
</span></span></code></pre></div><h2 id=get-grpcpython-docker-image>Get grpc/python Docker image<a hidden class=anchor aria-hidden=true href=#get-grpcpython-docker-image>#</a></h2><p>Here since I did not build my own Docker image but directly use the <a href=https://github.com/grpc/grpc-docker-library>official one</a>.</p><p>To get latest Python 3 environment with gRPC, run</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker pull grpc/python:1.4
</span></span></code></pre></div><p>Note here &ldquo;1.4&rdquo; tag is necessary, otherwise it will pull &ldquo;latest&rdquo; one, which is Python 2.7 environment.</p><h2 id=get-grpc-examples>Get gRPC examples<a hidden class=anchor aria-hidden=true href=#get-grpc-examples>#</a></h2><p>Follow the <a href=https://grpc.io/docs/quickstart/python.html#run-a-grpc-application>gRPC official guide</a>, we can get the example source code.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Clone the repository to get the example code:</span>
</span></span><span style=display:flex><span>git clone -b v1.6.x https://github.com/grpc/grpc
</span></span><span style=display:flex><span><span style=color:#75715e># Navigate to the &#34;hello, world&#34; Python example:</span>
</span></span><span style=display:flex><span>cd grpc/examples/python/helloworld
</span></span></code></pre></div><h2 id=run-in-containers>Run in containers<a hidden class=anchor aria-hidden=true href=#run-in-containers>#</a></h2><p>Run the RPC server in docker container</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run -itd --rm --name my-running-server <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>      -v <span style=color:#e6db74>&#34;</span>$PWD<span style=color:#e6db74>&#34;</span>:/usr/src/myapp -w /usr/src/myapp <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>      grpc/python:1.4 python3 greeter_server.py
</span></span></code></pre></div><p>Here &ldquo;d&rdquo; in <code>-itd</code> means &ldquo;detach&rdquo;. So we can let the container there and run other commands.
We can use <code>docker attach my-running-server</code> to see what is going on for server container, and <code>CTRL-p</code> <code>CTRL-q</code> to detach again.</p><p>Then, we can check docker default network using</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker network inspect bridge
</span></span></code></pre></div><p>From the output, the server container should have the IP &ldquo;174.17.0.2&rdquo; at network &ldquo;bridge&rdquo;.</p><p>Small modify from &ldquo;localhost&rdquo; to &ldquo;174.17.0.2&rdquo; is required.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>run</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># channel = grpc.insecure_channel(&#39;localhost:50051&#39;)</span>
</span></span><span style=display:flex><span>    channel <span style=color:#f92672>=</span> grpc<span style=color:#f92672>.</span>insecure_channel(<span style=color:#e6db74>&#39;174.17.0.2:50051&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>...</span>
</span></span></code></pre></div><p>In same terminal (because I was using ssh connection to a server), run the client</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run -it --rm --name my-running-client <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>      -v <span style=color:#e6db74>&#34;</span>$PWD<span style=color:#e6db74>&#34;</span>:/usr/src/myapp -w /usr/src/myapp <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>      grpc/python:1.4 python3 greeter_client.py
</span></span></code></pre></div><p>We can get correct output.</p><p>Also we can run client locally.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python3 greeter_client.py
</span></span></code></pre></div><p>The output should be same.</p></div><footer class=post-footer><ul class=post-tags><li><a href=gh.ysmiles.com/tags/grpc/>gRPC</a></li><li><a href=gh.ysmiles.com/tags/docker/>Docker</a></li><li><a href=gh.ysmiles.com/tags/linux/>Linux</a></li><li><a href=gh.ysmiles.com/tags/network/>Network</a></li></ul><nav class=paginav><a class=prev href=gh.ysmiles.com/posts/bitcoin-price-prediction/><span class=title>« Prev</span><br><span>Bitcoin price prediction</span></a>
<a class=next href=gh.ysmiles.com/posts/jian-ping-san-ze/><span class=title>Next »</span><br><span>简评三则</span></a></nav></footer><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//ysmiles.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a><nav id=TableOfContents><h2></h2><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#install-docker>Install Docker</a></li><li><a href=#install-grpc-at-local-host-os>Install gRPC at local host OS</a></li><li><a href=#get-grpcpython-docker-image>Get grpc/python Docker image</a></li><li><a href=#get-grpc-examples>Get gRPC examples</a></li><li><a href=#run-in-containers>Run in containers</a></li></ul></nav></nav></article></main><footer class=footer><span>&copy; 2023 <a href=gh.ysmiles.com>YSMILES HOME</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>